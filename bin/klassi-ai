#!/usr/bin/env node

const { spawn } = require('child_process');
const path = require('path');

// Get the command line arguments
const args = process.argv.slice(2);
const command = args[0] || 'dev';

// Get the directory where this package is installed
const packageDir = path.dirname(__dirname);

console.log(`üöÄ Starting Klassi-AI...`);
console.log(`üìÅ Package directory: ${packageDir}`);

// Change to the package directory and run the command
process.chdir(packageDir);

// Run the command using pnpm
const child = spawn('pnpm', [command], {
  stdio: 'inherit',
  shell: true,
  cwd: packageDir
});

child.on('error', (error) => {
  console.error(`‚ùå Error running klassi-ai:`, error);
  process.exit(1);
});

child.on('close', (code) => {
  if (code !== 0) {
    console.error(`‚ùå klassi-ai exited with code ${code}`);
    process.exit(code);
  }
  console.log(`‚úÖ klassi-ai completed successfully`);
});
